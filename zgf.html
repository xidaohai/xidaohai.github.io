<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>西岛海 · CM360正改法</title>
    <style>
    /* 添加主题切换按钮样式 */
    #themeToggle {
        transition: all 0.3s ease;
        box-shadow: var(--shadow-md);
    }
    
    #themeToggle:hover {
        transform: translateY(-2px);
        background: var(--accent-color);
    }

    /* 添加系统主题检测 */
    @media (prefers-color-scheme: dark) {
        body:not(.dark-theme) {
            --primary-color: #4299e1;
            --accent-color: #63b3ed;
            --text-dark: #e2e8f0;
            --text-light: #1a202c;
            --background-main: #1a202c;
            --background-panel: #2d3748;
            --border-color: #4a5568;
            --shadow-md: 0 4px 6px rgba(0,0,0,0.3);
            --button-add-color: #2ecc71;
            --button-remove-color: #e74c3c;
        }
    }
        
    :root {
        --primary-color: #2c5282;
        --accent-color: #3182ce;
        --text-dark: #2d3748;
        --text-light: #f7fafc;
        --background-main: #f0f4f8;
        --background-panel: #ffffff;
        --border-color: #cbd5e0;
        --shadow-md: 0 4px 6px rgba(0,0,0,0.05);
        --button-add-color: #2ecc71;
        --button-remove-color: #e74c3c;
    }

    .dark-theme {
        --primary-color: #4299e1;
        --accent-color: #63b3ed;
        --text-dark: #e2e8f0;
        --text-light: #1a202c;
        --background-main: #1a202c;
        --background-panel: #2d3748;
        --border-color: #4a5568;
        --shadow-md: 0 4px 6px rgba(0,0,0,0.3);
        --button-add-color: #2ecc71;
        --button-remove-color: e74c3c;
    }

    body {
        font-family: 'Inter', system-ui;
        padding: 1rem;
        background: var(--background-main);
        color: var(--text-dark);
        min-height: 100vh;
        -webkit-tap-highlight-color: transparent;
        transition: background 0.3s, color 0.3s;
    }

    /* 调整布局为一横排，并缩小每个模块宽度 */
    .main-container {
        display: flex;
        flex-wrap: nowrap; /* 强制不换行 */
        gap: 20px;
        justify-content: center;
        max-width: 1600px; /* 足够容纳所有模块的宽度 */
        margin: auto;
        overflow-x: auto; /* 如果屏幕不够宽，可以横向滚动 */
        padding: 0 20px; /* 增加左右内边距，防止被切 */
    }

    .calculator-container {
        max-width: 380px; /* 缩小最大宽度 */
        min-width: 300px; /* 缩小最小宽度 */
        margin: 1rem 0; /* 调整外边距 */
        padding: 2rem;
        background: var(--background-panel);
        border-radius: 12px;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border-color);
        flex: 1 1 340px; /* 调整flex-basis */
    }

    .input-group {
        margin: 1.2rem 0;
        padding: 1rem;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        position: relative;
    }
    
    .input-group.delta-calc {
        padding-top: 2rem;
    }

    label {
        display: block;
        margin-bottom: 0.5rem;
        color: #718096;
        font-size: 0.95rem;
        font-weight: 500;
    }

    input {
        width: 100%;
        padding: 0.9rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: var(--background-panel);
        color: var(--text-dark);
        font-size: 1rem;
        transition: all 0.3s ease;
        box-sizing: border-box;
    }
    
    .input-row {
        display: flex;
        gap: 1rem;
        align-items: center;
        margin-top: 0.5rem;
    }

    .input-row input {
        flex: 1;
    }

    .preset-buttons {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.6rem;
        margin: 1rem 0;
    }

    button {
        padding: 0.7rem;
        background: var(--primary-color);
        color: var(--text-light);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s ease;
    }

    button:hover {
        background: var(--accent-color);
        transform: translateY(-1px);
    }

    .result-box {
        margin-top: 1.5rem;
        padding: 1.5rem;
        background: var(--background-main);
        border-radius: 8px;
        border: 1px solid var(--border-color);
        text-align: center;
    }

    /* 新增历史记录样式 */
    .history-item {
        padding: 0.5rem;
        margin: 0.2rem 0;
        background: var(--background-main);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .history-item:hover {
        background: var(--accent-color);
        color: var(--text-light);
    }
    
    .btn-calculate {
        background-color: var(--primary-color);
        color: var(--text-light);
    }
    
    .btn-calculate:hover {
        background-color: var(--accent-color);
    }
    
    .btn-add {
        background-color: var(--button-add-color);
        color: #fff;
    }
    
    .btn-add:hover {
        background-color: #27ae60;
    }
    
    .btn-remove {
        background-color: var(--button-remove-color);
        color: #fff;
        position: absolute;
        top: 10px;
        right: 10px;
        padding: 8px 12px;
    }
    
    .result-group {
        margin-top: 20px;
        padding-top: 20px;
        border-top: 2px dashed var(--border-color);
    }

    .result-row {
        display: flex;
        justify-content: center; /* 居中显示 */
        align-items: center;
        padding: 15px;
        background-color: var(--background-main);
        border-radius: 6px;
        margin-bottom: 10px; /* 添加间距 */
    }
    
    .result-label {
        font-weight: bold;
        color: var(--primary-color);
    }
    
    .result-value {
        font-size: 1.2rem;
        color: var(--primary-color);
    }

    .result-section {
        margin-top: 20px;
        border-top: 2px dashed var(--border-color);
        padding-top: 20px;
    }
    
    .result-section h3 {
        text-align: center;
        color: #718096;
        margin-bottom: 10px;
    }
    
    .toggle-mode-button {
        background: #6c757d;
        color: white;
        margin-bottom: 1rem;
    }

    </style>
</head>
<body>
    <button id="themeToggle" style="position: fixed; top: 20px; right: 20px; padding: 10px 15px; border-radius: 8px; cursor: pointer; background: var(--primary-color); color: var(--text-light); border: none; z-index: 1000;">
        🌙 黑夜模式
    </button>
    
    <div class="main-container">
        
        <div class="calculator-container">
            <h2 style="text-align: center; color: var(--primary-color); margin-bottom: 1.8rem;">
                     西岛海 · CM360正改法
            </h2>

            <div class="formula-display" style="margin: 1.5rem 0; padding: 1rem; background: var(--background-main); border-radius: 8px; font-family: monospace; color: var(--accent-color); font-size: 1.1em; text-align: center; border: 1px solid var(--border-color);"id="formulaDisplay">
                新值 = ( 旧值 × 360°) ÷ ( 360°+ Δ值 ) or 倍率 × 旧值
            </div>

            <div class="input-group">
                <label>旧值（cm/360°）【一般在20-80之间】</label>
                <input type="number" id="oldValue" step="0.1" value="50" oninput="calculate()">
            </div>

            <div class="input-group">
                <label>Δ调整量（360°± Δ°）</label>
                <div class="preset-buttons">
                    <button onclick="adjustDelta(0.25)">+0.25°</button>
                    <button onclick="adjustDelta(1)">+1°</button>
                    <button onclick="adjustDelta(10)">+10°</button>
                    <button onclick="adjustDelta(-0.25)">-0.25°</button>
                    <button onclick="adjustDelta(-1)">-1°</button>
                    <button onclick="adjustDelta(-10)">-10°</button>
                </div>
                <input type="number" id="deltaValue" step="0.25" value="0" 
                       oninput="calculate()" placeholder="输入调整度数">
            </div>

            <div class="result-box">
                <div style="color: #718096;">新灵敏度值</div>
                <div style="font-size: 2rem; color: var(--primary-color); margin: 1rem 0;">
                    <span id="newValue">40.00</span> cm/360°
                </div>
            </div>

            <div class="input-group">
                <label>鼠标距离&对应角度（一般手腕摆动一次5cm）</label>
                <div class="preset-buttons">
                    <button onclick="adjustWrist(5, 45)">45°</button>
                    <button onclick="adjustWrist(5, 90)">90°</button>
                    <button onclick="adjustWrist(5, 180)">180°</button>
                </div>
                <div style="display: flex; gap: 1rem;">
                    <input type="number" id="wristDistance" step="0.1" value="5" oninput="calculateFromWrist()" placeholder="移动距离">
                    <input type="number" id="wristAngle" step="1" value="180" oninput="calculateFromWrist()" placeholder="对应角度">
                </div>
            </div>

            <div class="input-group">
                <label>目标角度&鼠标距离（一般近目标身体大小3.6°、中远1°。）</label>
                <div style="display: flex; gap: 1rem;">
                    <input type="number" id="targetAngle" step="0.1" value="3.6" oninput="calculateFromTarget()" placeholder="目标角度">
                    <input type="number" id="targetDistance" step="0.01" value="0.4" oninput="calculateFromTarget()" placeholder="对应距离">
                </div>
            </div>

            <div class="input-group">
                <label>历史记录（点击恢复）</label>
                <div id="historyList" class="result-box" style="max-height: 200px; overflow-y: auto;"></div>
            </div>
        </div>
        
        <div class="calculator-container">
            <h2 style="text-align: center; color: var(--primary-color); margin-bottom: 1.8rem;">
                角速度绝对增量计算器
            </h2>
            <p style="text-align: center; color: #718096; margin-bottom: 1rem;">
                新值 = 360 / ( (360 / 旧值) + C )
            </p>

            <div class="input-group">
                <label>旧值 (cm/360°)</label>
                <input type="number" id="angularOldValue" step="0.1" value="50" oninput="calculateAngularVelocity()">
            </div>
            
            <div class="input-group">
                <label>角速度绝对增量 C（单位：°）</label>
                <div class="preset-buttons">
                    <button onclick="adjustAngularC(0.25)">+0.25°</button>
                    <button onclick="adjustAngularC(1)">+1°</button>
                    <button onclick="adjustAngularC(10)">+10°</button>
                    <button onclick="adjustAngularC(-0.25)">-0.25°</button>
                    <button onclick="adjustAngularC(-1)">-1°</button>
                    <button onclick="adjustAngularC(-10)">-10°</button>
                </div>
                <input type="number" id="angularCValue" step="0.1" value="10" oninput="calculateAngularVelocity()" placeholder="输入绝对增量">
            </div>

            <div class="result-section">
                <h3>计算结果</h3>
                <div class="result-row">
                    <span class="result-label">旧值 (cm/360°):</span>
                    <span class="result-value" id="oldCmResult">50.00</span>
                </div>
                <div class="result-row">
                    <span class="result-label">旧值角速度 (°/cm):</span>
                    <span class="result-value" id="oldAngularVelocityResult">7.20</span>
                </div>
                <div class="result-row">
                    <span class="result-label">新值 (cm/360°):</span>
                    <span class="result-value" id="newCmResult">40.00</span>
                </div>
                <div class="result-row">
                    <span class="result-label">新值角速度 (°/cm):</span>
                    <span class="result-value" id="newAngularVelocityResult">9.00</span>
                </div>
            </div>
        </div>

        <div class="calculator-container">
            <h2 id="mode-title" style="text-align: center; color: var(--primary-color); margin-bottom: 1.8rem;">
                灵敏度C值计算器
            </h2>
            <p id="mode-formula" style="text-align: center; color: #718096; margin-bottom: 1rem;">
                C值 = (360° ÷ 新值) - (360° ÷ 旧值)
            </p>
            
            <button class="toggle-mode-button" onclick="toggleMode()">切换计算模式 (当前: C值)</button>
            
            <div id="delta-calculator-container">
                <div class="input-group delta-calc">
                    <button class="btn-remove" onclick="removeGroup(this)">删除</button>
                    <div class="input-row">
                        <label for="old-value-1">旧值 (cm/360°):</label>
                        <input type="number" id="old-value-1" value="64.96">
                    </div>
                    <div class="input-row">
                        <label for="new-value-1">新值 (cm/360°):</label>
                        <input type="number" id="new-value-1" placeholder="例如: 52.78">
                    </div>
                    <div class="result-group" id="result-group-1" style="display: none;">
                        <div class="result-row">
                            <span class="result-label" id="combined-result-1">--</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn-calculate" onclick="calculateAll()"><i class="fas fa-calculator"></i> 计算所有</button>
                <button class="btn-add" onclick="addGroup()"><i class="fas fa-plus"></i> 增加对比组</button>
            </div>
        </div>

        <div class="calculator-container">
            <h2 style="text-align: center; color: var(--primary-color); margin-bottom: 1.8rem;">
                百分比增减计算器
            </h2>
            <p style="text-align: center; color: #718096; margin-bottom: 1rem;">
                计算两个基准值的 ± 百分比结果
            </p>

            <div class="input-group">
                <label>百分比 (%)</label>
                <input type="number" id="percentageInput" step="0.1" value="10" oninput="calculatePercentage()">
            </div>
            
            <div class="input-group">
                <label>基准值一</label>
                <input type="number" id="baseValue1Input" step="0.01" value="50" oninput="calculatePercentage()">
            </div>
            
            <div class="input-group">
                <label>基准值二</label>
                <input type="number" id="baseValue2Input" step="0.01" value="60" oninput="calculatePercentage()">
            </div>

            <div class="result-section">
                <h3>基准值一</h3>
                <div class="result-row">
                    <span class="result-label">增加后的值:</span>
                    <span class="result-value" id="increaseResult1">55.00</span>
                </div>
                <div class="result-row">
                    <span class="result-label">减少后的值:</span>
                    <span class="result-value" id="decreaseResult1">45.00</span>
                </div>
            </div>
            
            <div class="result-section">
                <h3>基准值二</h3>
                <div class="result-row">
                    <span class="result-label">增加后的值:</span>
                    <span class="result-value" id="increaseResult2">66.00</span>
                </div>
                <div class="result-row">
                    <span class="result-label">减少后的值:</span>
                    <span class="result-value" id="decreaseResult2">54.00</span>
                </div>
            </div>
        </div>
        
    </div>

    <script>
        // 主题切换功能
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateToggleButton();
        }

        function updateToggleButton() {
            const toggleBtn = document.getElementById('themeToggle');
            const isDark = document.body.classList.contains('dark-theme');
            toggleBtn.textContent = isDark ? '☀️ 白天模式' : '🌙 黑夜模式';
            const color = getComputedStyle(document.documentElement).getPropertyValue(isDark ? '--accent-color' : '--primary-color');
            toggleBtn.style.background = color;
        }

        // 初始化主题
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.body.classList.toggle('dark-theme', savedTheme === 'dark');
            updateToggleButton();
        }

        // 初始化时调用
        initTheme();
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        let historyRecords = [];
        // 历史记录显示更新
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = historyRecords.map((record, index) => `
                <div class="history-item" onclick="loadHistory(${index})">
                    [${record.time}] ${record.oldValue.toFixed(2)}cm → ${record.newValue.toFixed(2)}cm (Δ${record.delta}°)
                </div>
            `).join('');
        }
    
        // 加载历史记录
        function loadHistory(index) {
            const record = historyRecords[index];
            if (!record) return;
    
            // 恢复所有参数
            document.getElementById('oldValue').value = record.oldValue;
            document.getElementById('deltaValue').value = record.delta;
            document.getElementById('wristDistance').value = record.wristDistance;
            document.getElementById('wristAngle').value = record.wristAngle;
            document.getElementById('targetAngle').value = record.targetAngle;
            document.getElementById('targetDistance').value = record.targetDistance;
            
            calculate();
        }
    
        // 调整量快捷操作
        function adjustDelta(value) {
            const deltaInput = document.getElementById('deltaValue');
            deltaInput.value = (parseFloat(deltaInput.value) || 0) + value;
            calculate();
        }
    
        // 手腕参数快捷预设
        function adjustWrist(distance, angle) {
            document.getElementById('wristDistance').value = distance;
            document.getElementById('wristAngle').value = angle;
            calculateFromWrist();
        }
    
        // 根据手腕参数计算
        function calculateFromWrist() {
            const distance = parseFloat(document.getElementById('wristDistance').value);
            const angle = parseFloat(document.getElementById('wristAngle').value);
            
            if(distance > 0 && angle > 0) {
                const newCM = (distance * 360) / angle;
                document.getElementById('oldValue').value = newCM.toFixed(2);
                calculate();
            }
        }
    
        // 根据目标参数计算
        function calculateFromTarget() {
            const angle = parseFloat(document.getElementById('targetAngle').value);
            const distance = parseFloat(document.getElementById('targetDistance').value);
            
            if(angle > 0 && distance > 0) {
                const newCM = (distance * 360) / angle;
                document.getElementById('oldValue').value = newCM.toFixed(2);
                calculate();
            }
        }
    
        // 主计算函数
        function calculate() {
            const oldValue = parseFloat(document.getElementById('oldValue').value);
            const delta = parseFloat(document.getElementById('deltaValue').value);
            
            if(isNaN(oldValue) || isNaN(delta) || (360 + delta) === 0) {
                document.getElementById('newValue').textContent = '输入无效';
                return;
            }
            
            const newValue = (oldValue * 360) / (360 + delta);
            document.getElementById('newValue').textContent = newValue.toFixed(2);
    
            const wristDistance = parseFloat(document.getElementById('wristDistance').value);
            if (!isNaN(wristDistance) && wristDistance > 0) {
                const calculatedAngle = (wristDistance * 360) / newValue;
                document.getElementById('wristAngle').value = calculatedAngle.toFixed(1);
            }
    
            const targetAngle = parseFloat(document.getElementById('targetAngle').value);
            document.getElementById('targetDistance').value = (newValue * targetAngle / 360).toFixed(2);
    
            const historyItem = {
                time: new Date().toLocaleTimeString(),
                oldValue: oldValue,
                delta: delta.toFixed(2),
                newValue: newValue,
                wristDistance: wristDistance || parseFloat(document.getElementById('wristDistance').value),
                wristAngle: parseFloat(document.getElementById('wristAngle').value) || 0,
                targetAngle: targetAngle || 0,
                targetDistance: parseFloat(document.getElementById('targetDistance').value) || 0
            };
            historyRecords.unshift(historyItem);
            if (historyRecords.length > 10) historyRecords.pop();
            updateHistoryDisplay();
        }
    
        // 初始化计算
        calculate();

        // 灵敏度 C值/Δ值计算器逻辑
        let isCMode = true; // 默认是C值模式
        
        function toggleMode() {
            isCMode = !isCMode;
            const modeTitle = document.getElementById('mode-title');
            const modeFormula = document.getElementById('mode-formula');
            const toggleButton = document.querySelector('.toggle-mode-button');
            
            if (isCMode) {
                modeTitle.textContent = "灵敏度C值计算器";
                modeFormula.textContent = "C值 = (360° ÷ 新值) - (360° ÷ 旧值)";
                toggleButton.textContent = "切换计算模式 (当前: C值)";
            } else {
                modeTitle.textContent = "灵敏度 Δ 值计算器";
                modeFormula.textContent = "Δ值 = (旧值 × 360°) ÷ 新值 - 360°";
                toggleButton.textContent = "切换计算模式 (当前: Δ值)";
            }
            calculateAll();
        }
        
        let groupCount = 1;
        function calculateAll() {
            for (let i = 1; i <= groupCount; i++) {
                const oldInput = document.getElementById(`old-value-${i}`);
                const newInput = document.getElementById(`new-value-${i}`);
                const resultGroup = document.getElementById(`result-group-${i}`);
                const combinedResultOutput = document.getElementById(`combined-result-${i}`);
                
                if (oldInput && newInput && resultGroup && combinedResultOutput) {
                    const oldValue = parseFloat(oldInput.value);
                    const newValue = parseFloat(newInput.value);
        
                    if (!isNaN(oldValue) && !isNaN(newValue) && oldValue !== 0 && newValue !== 0) {
                        let resultValue;
                        let resultLabel;
                        
                        if (isCMode) {
                            resultValue = (360 / newValue) - (360 / oldValue);
                            resultLabel = `C值: ${resultValue >= 0 ? '+' : ''}${resultValue.toFixed(2)}°`;
                        } else {
                            resultValue = (oldValue * 360) / newValue - 360;
                            resultLabel = `Δ值: ${resultValue >= 0 ? '+' : ''}${resultValue.toFixed(2)}°`;
                        }
                        
                        combinedResultOutput.textContent = resultLabel;
                        resultGroup.style.display = 'block';
                    } else {
                        combinedResultOutput.textContent = '输入无效';
                        resultGroup.style.display = 'block';
                    }
                }
            }
        }
        
        function addGroup() {
            groupCount++;
            const container = document.getElementById('delta-calculator-container');
            const newGroupHtml = `
                <div class="input-group delta-calc">
                    <button class="btn-remove" onclick="removeGroup(this)">删除</button>
                    <div class="input-row">
                        <label for="old-value-${groupCount}">旧值 (cm/360°):</label>
                        <input type="number" id="old-value-${groupCount}">
                    </div>
                    <div class="input-row">
                        <label for="new-value-${groupCount}">新值 (cm/360°):</label>
                        <input type="number" id="new-value-${groupCount}" placeholder="例如: 52.78">
                    </div>
                    <div class="result-group" id="result-group-${groupCount}" style="display: none;">
                        <div class="result-row">
                            <span class="result-label" id="combined-result-${groupCount}">--</span>
                        </div>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', newGroupHtml);
        }

        function removeGroup(button) {
            const group = button.closest('.input-group');
            if (group) {
                group.remove();
            }
        }

        // 百分比增减计算器
        function calculatePercentage() {
            const percentage = parseFloat(document.getElementById('percentageInput').value);
            const baseValue1 = parseFloat(document.getElementById('baseValue1Input').value);
            const baseValue2 = parseFloat(document.getElementById('baseValue2Input').value);

            const increaseResult1Element = document.getElementById('increaseResult1');
            const decreaseResult1Element = document.getElementById('decreaseResult1');
            const increaseResult2Element = document.getElementById('increaseResult2');
            const decreaseResult2Element = document.getElementById('decreaseResult2');

            if (isNaN(percentage) || isNaN(baseValue1)) {
                increaseResult1Element.textContent = '输入无效';
                decreaseResult1Element.textContent = '输入无效';
            } else {
                increaseResult1Element.textContent = (baseValue1 * (1 + percentage / 100)).toFixed(2);
                decreaseResult1Element.textContent = (baseValue1 * (1 - percentage / 100)).toFixed(2);
            }
            
            if (isNaN(percentage) || isNaN(baseValue2)) {
                increaseResult2Element.textContent = '输入无效';
                decreaseResult2Element.textContent = '输入无效';
            } else {
                increaseResult2Element.textContent = (baseValue2 * (1 + percentage / 100)).toFixed(2);
                decreaseResult2Element.textContent = (baseValue2 * (1 - percentage / 100)).toFixed(2);
            }
        }

        // 角速度绝对增量计算器
        function calculateAngularVelocity() {
            const oldValueInput = document.getElementById('angularOldValue');
            const cValueInput = document.getElementById('angularCValue');
            const oldCmResultElement = document.getElementById('oldCmResult');
            const oldAngularVelocityResultElement = document.getElementById('oldAngularVelocityResult');
            const newCmResultElement = document.getElementById('newCmResult');
            const newAngularVelocityResultElement = document.getElementById('newAngularVelocityResult');
            
            const oldValue = parseFloat(oldValueInput.value);
            const cValue = parseFloat(cValueInput.value);

            if (isNaN(oldValue) || isNaN(cValue) || (360 / oldValue + cValue) === 0) {
                oldCmResultElement.textContent = '输入无效';
                oldAngularVelocityResultElement.textContent = '输入无效';
                newCmResultElement.textContent = '输入无效';
                newAngularVelocityResultElement.textContent = '输入无效';
                return;
            }

            const oldAngularVelocity = 360 / oldValue;
            const newValue = 360 / (oldAngularVelocity + cValue);
            const newAngularVelocity = 360 / newValue;

            oldCmResultElement.textContent = oldValue.toFixed(2);
            oldAngularVelocityResultElement.textContent = oldAngularVelocity.toFixed(2);
            newCmResultElement.textContent = newValue.toFixed(2);
            newAngularVelocityResultElement.textContent = newAngularVelocity.toFixed(2);
        }

        // 角速度绝对增量快捷操作
        function adjustAngularC(value) {
            const cInput = document.getElementById('angularCValue');
            cInput.value = (parseFloat(cInput.value) || 0) + value;
            calculateAngularVelocity();
        }

        // 初始化所有计算
        calculatePercentage();
        calculateAngularVelocity();
        calculateAll();
    </script>
</body>
</html>